From 45474a727daf901d8276cf2f6c5458f96c50ec58 Mon Sep 17 00:00:00 2001
From: Attila Lakatos <Cropi@users.noreply.github.com>
Date: Wed, 21 Apr 2021 13:10:11 +0200
Subject: [PATCH] Refactoring - remove unused variable and dead code (#464)

---
 src/Library/DeviceBase.cpp        | 6 +-----
 src/Library/DeviceManagerBase.cpp | 2 --
 2 files changed, 1 insertion(+), 7 deletions(-)

diff --git a/src/Library/DeviceBase.cpp b/src/Library/DeviceBase.cpp
index ca6f882..a86419a 100644
--- a/src/Library/DeviceBase.cpp
+++ b/src/Library/DeviceBase.cpp
@@ -98,10 +98,6 @@ namespace usbguard
      *
      */
     FDInputStream descriptor_stream(sysfs_device.openAttribute("descriptors"));
-    /*
-     * Find out the descriptor data stream size
-     */
-    size_t descriptor_expected_size = 0;
 
     if (!descriptor_stream.good()) {
       throw ErrnoException("DeviceBase", sysfs_device.getPath(), errno);
@@ -110,7 +106,7 @@ namespace usbguard
     initializeHash();
     USBDescriptorParser parser(*this);
 
-    if ((descriptor_expected_size = parser.parse(descriptor_stream)) < sizeof(USBDeviceDescriptor)) {
+    if (parser.parse(descriptor_stream) < sizeof(USBDeviceDescriptor)) {
       throw Exception("DeviceBase", sysfs_device.getPath(),
         "USB descriptor parser processed less data than the size of a USB device descriptor");
     }
diff --git a/src/Library/DeviceManagerBase.cpp b/src/Library/DeviceManagerBase.cpp
index 297cdcb..b2bcc94 100644
--- a/src/Library/DeviceManagerBase.cpp
+++ b/src/Library/DeviceManagerBase.cpp
@@ -149,8 +149,6 @@ namespace usbguard
     }
 
 #endif
-    /* UNREACHABLE */
-    return std::string();
   }
 
   int DeviceManagerBase::ueventOpen()
